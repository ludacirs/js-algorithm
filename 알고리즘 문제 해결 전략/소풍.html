<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>소풍</title>
</head>
<body>
<script>
     const input =[
         3,
         '2 1', '0 1',
         '4 6', '0 1 1 2 2 3 3 0 0 2 1 3',
         '6 10', '0 1 0 2 1 2 1 3 1 4 2 3 2 4 3 4 3 5 4 5'];
     // const input = ['3',
     // '2 1',
     // '0 1',
     // '4 6',
     // '0 1 1 2 2 3 3 0 0 2 1 3',
     // '6 10',
     // '0 1 0 2 1 2 1 3 1 4 2 3 2 4 3 4 3 5 4 5'];
     // const input = require("fs").readFileSync("/dev/stdin").toString().trim().split('\n');

     const pros = input.slice(1,input.length).map(v=>v.split(' ').map(v=>Number(v)));

     for(let i=0; i<pros.length; i+=2){
         const arr = pros.slice(i,i+2);
         let answer = 0;
         const number = arr[0];
         const mate = arr[1];

         dfs(0,[]);


         function dfs(index, line){
             if(line.length === number[0]){
                 answer++;
                 return ;
             }
             for(let i=index;i<mate.length;i+=2){
                 if(dupCheck(line, [mate[i], mate[i+1]] )) {
                     line.push(mate[i]);
                     line.push(mate[i + 1]);
                     dfs(i + 2, line);
                     line.pop();
                     line.pop();
                 }
             }
         }
         // console.log(`${i+1}번째 케이스 끝 : ${answer}`);
         console.log(answer);
     }


     //중복 체크 함수
     function dupCheck(arr1, [first, second]){
         return !(arr1.includes(first) || arr1.includes(second));
     }

     // for(let i=0; i<n; i++){
     //     const aa = pros.splice(0,2);
     //     const number = aa.shift();
     //     const arr = bin(...aa);
     //     let answer = 0;
     //
     //     dfs(0,[]);
     //
     //     function dfs(index, line){
     //         if(line.length === number[0]/2){
     //             answer++;
     //             return ;
     //         }
     //         for(let i=index;i<arr.length;i++){
     //             if(dupCheck(line,arr[i])){
     //                 line.push(arr[i]);
     //                 dfs(i+1,line,arr);
     //                 line.pop();
     //             }
     //         }
     //     }
     //     // console.log(`${i+1}번째 케이스 끝 : ${answer}`);
     //     console.log(answer);
     // }
     //
     //
     // //중복 체크 함수
     // function dupCheck(arr,arr2){
     //     //평탄화
     //     const arr1 = [];
     //     arr.map(v=>{
     //         v.map(v=>arr1.push(v));
     //     });
     //
     //     return !(arr1.includes(arr2[0]) || arr1.includes(arr2[1]));
     // }
     //
     //
     // function bin(arr){
     //     const newArr = [];
     //     for(let i=0; i<arr.length;i+=2){
     //         newArr.push(arr.slice(i,i+2));
     //     }
     //     return newArr;
     // }
</script>
</body>
</html>